<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tradesmen Dashboard - TradeCo</title>
    <link rel="stylesheet" href="../../public/css/style.css" />
  </head>
  <body>
    <header class="header">
      <div class="logo">
        <img src="../../public/img/tradeco.png" alt="TradeCo Logo" />
        <h1 class="big-title">TradeCo</h1>
      </div>
    </header>

    <main class="dashboard">
      <h2 class="welcome-message">Hello, <%= data.name %>!</h2>

      <!-- Profile Details Section -->
      <section class="profile-details">
        <div class="profile-card">
          <h3>Profile Details</h3>
          <p><strong>Account Details:</strong> Sort Code: <%= data.sortCode %>, Account Number: <%= data.account %></p>
        </div>
      </section>

<section class="jobs-reserved">
  <h3>Jobs Reserved (<%=reserved.length%>)</h3>
  <div class="job-cards">
    <% if (reserved && reserved.length > 0) { %>
      <% reserved.forEach((item) => { %>
        <div class="job-card reserved">
          <h4><%=item.title%></h4>
          <p><strong>Location:</strong> <%=item.location%></p>
          <p><strong>Description:</strong> <%=item.description%></p>
          <p><strong>Budget:</strong> <%=item.budget%></p>
          <p class="status-badge">Reserved by you</p>
        </div>
      <% }); %>
    <% } else { %>
      <p>No reserved jobs yet.</p>
    <% } %>
  </div>
</section>

<!-- Available Jobs Section -->
<section class="jobs-available">
  <h3>Jobs Available (<%=open.length%>)</h3>
  <div class="job-cards">
    <% if (open && open.length > 0) { %>
      <% open.forEach((item) => { %>
        <form action="/reserveJob" class="job-card" method="POST">
          <h4><%=item.title%></h4>
          <p><strong>Location:</strong> <%=item.location%></p>
          <p><strong>Description:</strong> <%=item.description%></p>
          <p><strong>Budget:</strong> <%=item.budget%></p>
          <input type="hidden" name="job" value="<%=item._id%>">
          <button class="reserve-btn">Reserve Job</button>
        </form>
      <% }); %>
    <% } else { %>
      <p>No available jobs at this time.</p>
    <% } %>
  </div>
</section>

    </main>

    <footer class="footer">
      <div class="footer-content">
        <h2>Contact Us</h2>
        <p>65 Market Street</p>
        <p>Aberdeen</p>
        <p>+44 7818904132</p>
        <p>Tradesco@hotmail.co.uk</p>
        <button class="cta" onclick="location.href='/contact_us'">GET IN TOUCH</button>
      </div>
    </footer>
  </body>
</html>
